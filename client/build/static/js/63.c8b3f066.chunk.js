(this["webpackJsonp@jazaa/jazaa-payment-gateway"]=this["webpackJsonp@jazaa/jazaa-payment-gateway"]||[]).push([[63],{1471:function(e,a,t){"use strict";t.r(a);var n=t(552),r=t.n(n),c=t(553),l=t(542),o=t(0),i=t.n(o),u=t(663),s=t(660),m=t(661),d=t(662),g=t(834),h=t(929),E=t(527),p=t(526),b=t(69),f=t(522),k=t(784),v=t(523),y=t(667),O=t(525),j=t(613),C=t(689),S=t(1310),R=t(528),w=t(823),x=t(22),z=t(548),T=t.n(z),A=t(166),I=t(563),D=(t(564),t(1105)),N=t(1106);function _(e){var a=e.bank,t=Object(o.useState)(null),n=Object(l.a)(t,2),r=n[0],c=n[1],p=Object(o.useState)(""),b=Object(l.a)(p,2),f=b[0],k=b[1],v=e.id;console.log(r);var y=function(e){I.b.success("".concat(e),{autoClose:2e3})},O=function(e){I.b.error("".concat(e),{autoClose:2e3})};return i.a.createElement(i.a.Fragment,null,i.a.createElement(I.a,{position:I.b.POSITION.TOP_CENTER}),i.a.createElement(u.a,{isOpen:e.modal,toggle:e.toggle},i.a.createElement(s.a,{toggle:e.toggle},"Tambah Rekening Merchant"),i.a.createElement(m.a,null,i.a.createElement(E.a,null,"Rekening",i.a.createElement(h.a,{onChange:function(e){return c(e.target.value)},type:"select"},i.a.createElement("option",{selected:!0,disabled:!0},"Pilih Rekening"),a.map((function(e,a){return i.a.createElement(i.a.Fragment,null,i.a.createElement("option",{value:e.id,key:a},e.name," ",e.number))})))),i.a.createElement(E.a,null,"Merchant Rate",i.a.createElement(h.a,{onChange:function(e){return k(e.target.value)},value:f,type:"number"}))),i.a.createElement(d.a,null,i.a.createElement(g.a,{onClick:function(){T.a.post("".concat(A.a,"/rekening-merchant/add/").concat(v),{rekening_id:parseInt(r),merchantRate:f},{headers:{Authorization:"Bearer ".concat(A.b)}}).then((function(a){"OK"===a.data.status&&y("Rekening berhasil ditambahkan"),"Satu bank hanya boleh satu rekening"===a.data.messages&&O("Satu bank hanya boleh satu rekening"),e.toggle()})).catch((function(e){return console.log(e)}))},disabled:!r||!f,color:"primary"},"Submit")," ",i.a.createElement(g.a,{color:"secondary",onClick:e.toggle},"Cancel"))))}var B=function(e,a){a?I.b.success("".concat(e),{onClose:function(){return window.location.href="".concat(a)},autoClose:1e3}):I.b.success("".concat(e),{autoClose:1e3})},F=function(e){I.b.error("".concat(e),{autoClose:1e3})};function L(e){var a=parseInt(e.id);return i.a.createElement("div",null,i.a.createElement(I.a,{position:I.b.POSITION.TOP_CENTER}),i.a.createElement(u.a,{isOpen:e.modal,toggle:e.toggle},i.a.createElement(s.a,{toggle:e.toggle},"Delete Rekening Merchant"),i.a.createElement(m.a,null,i.a.createElement(E.a,null,"Apakah anda yakin menghapus rekening ini pada merchant? ",e.item)),i.a.createElement(d.a,null,i.a.createElement(g.a,{onClick:function(){T.a.post("".concat(A.a,"/rekening-merchant/delete/").concat(a),{rekening_id:parseInt(e.item)},{headers:{Authorization:"Bearer ".concat(A.b)}}).then((function(t){t.data.data&&B("Rekening berhasil dihapus","/user/edit/".concat(a)),"ERROR"===t.data.status&&F("Terdapat kesalahan pada server"),e.toggle()})).catch((function(e){return console.log(e)}))},color:"primary"},"Submit")," ",i.a.createElement(g.a,{color:"secondary",onClick:e.toggle},"Cancel"))))}a.default=function(e){var a=Object(o.useState)(""),t=Object(l.a)(a,2),n=t[0],z=t[1],P=Object(o.useState)(""),M=Object(l.a)(P,2),K=M[0],q=M[1],J=Object(o.useState)(!1),U=Object(l.a)(J,2),V=U[0],G=U[1],H=Object(o.useState)([]),Q=Object(l.a)(H,2),W=Q[0],X=Q[1],Y=Object(o.useState)([]),Z=Object(l.a)(Y,2),$=Z[0],ee=Z[1],ae=Object(o.useState)(!1),te=Object(l.a)(ae,2),ne=te[0],re=te[1],ce=Object(o.useState)(null),le=Object(l.a)(ce,2),oe=le[0],ie=le[1],ue=Object(o.useState)(0),se=Object(l.a)(ue,2),me=se[0],de=se[1],ge=Object(o.useState)(null),he=Object(l.a)(ge,2),Ee=he[0],pe=he[1],be=Object(o.useState)(!1),fe=Object(l.a)(be,2),ke=fe[0],ve=fe[1],ye=Object(o.useState)(!1),Oe=Object(l.a)(ye,2),je=Oe[0],Ce=Oe[1],Se=Object(o.useState)(!1),Re=Object(l.a)(Se,2),we=Re[0],xe=Re[1],ze=Object(o.useState)(!1),Te=Object(l.a)(ze,2),Ae=Te[0],Ie=Te[1],De=e.match.params.id;Object(o.useEffect)((function(){T.a.get("".concat(A.a,"/merchant/").concat(De),{headers:{Authorization:"Bearer ".concat(A.b)}}).then((function(e){"ERROR"===e.data.status&&(window.location.href="/404"),z(e.data.data.name),q(e.data.data.phone),G(e.data.data.active)})).catch((function(e){return console.log(e)}));var e=function(){try{T.a.get("".concat(A.a,"/rekening-merchant/").concat(De),{headers:{Authorization:"Bearer ".concat(A.b)}}).then((function(e){console.log(e.data),ee(e.data.data)}))}catch(Pe){console.log(Pe)}};e(),Ae&&e(),T.a.get("".concat(A.a,"/rekening-admin"),{headers:{Authorization:"Bearer ".concat(A.b)}}).then((function(e){console.log(e.data.values),X(e.data.values)}))}),[De,Ae]);var Ne=function(e){T.a.put("".concat(A.a,"/rekening-merchant/edit/").concat(De),{merchant_rate:parseInt(me),rekening_id:parseInt(e),new_rekening_id:parseInt(Ee)},{headers:{Authorization:"Bearer ".concat(A.b)}}).then((function(e){e.data.data&&B("Rekening berhasil diubah"),"Rekening sudah ada"===e.data.messages&&F("Rekening sudah ada")})).catch((function(e){return console.log(e)}))};console.log(W);var _e=function(){return ve(!ke)},Be=function(){return Ce(!je)},Fe=function(){return xe(!we)},Le=function(e){I.b.success("".concat(e),{onClose:function(){return window.location.href="/user-management"},autoClose:3e3})},Pe=function(e){I.b.error("".concat(e),{autoClose:3e3})},Me=function(){var a=Object(c.a)(r.a.mark((function a(t){var c,l;return r.a.wrap((function(a){for(;;)switch(a.prev=a.next){case 0:return c=e.match.params.id,t.preventDefault(),a.prev=2,a.next=5,T.a.put("".concat(A.a,"/merchant/").concat(c),{name:n,phone:K.toString(),active:V},{headers:{Authorization:"Bearer ".concat(A.b)}});case 5:if("OK"!==(l=a.sent).data.status||0===l.data.data.length){a.next=10;break}Le("Data berhasil diedit"),a.next=15;break;case 10:if(400!==l.status){a.next=14;break}return a.abrupt("return",i.a.createElement(x.c,{to:"/404"}));case 14:Pe("Terdapat kesalahan pada server");case 15:a.next=20;break;case 17:a.prev=17,a.t0=a.catch(2),console.log(a.t0);case 20:case"end":return a.stop()}}),a,null,[[2,17]])})));return function(e){return a.apply(this,arguments)}}(),Ke=function(){var a=Object(c.a)(r.a.mark((function a(){var t;return r.a.wrap((function(a){for(;;)switch(a.prev=a.next){case 0:return t=e.match.params.id,a.prev=1,a.next=4,T.a.delete("".concat(A.a,"/merchant/").concat(t),{headers:{Authorization:"Bearer ".concat(A.b)}});case 4:"OK"===a.sent.data.status?Le("Data berhasil dihapus"):Pe("Terdapat kesalahan pada server"),a.next=11;break;case 8:a.prev=8,a.t0=a.catch(1),console.log(a.t0);case 11:case"end":return a.stop()}}),a,null,[[1,8]])})));return function(){return a.apply(this,arguments)}}(),qe=function(e,a){return console.log(e),i.a.createElement(i.a.Fragment,null,oe===a?i.a.createElement("tr",{key:a},i.a.createElement("td",null,e.rekening.bank.name),i.a.createElement("td",null,i.a.createElement(h.a,{onChange:function(e){return pe(e.target.value)},style:{width:200},type:"select"},i.a.createElement("option",{selected:!0,disabled:!0},"Pilih Rekening"),W.map((function(e,a){return console.log(e),i.a.createElement(i.a.Fragment,null,i.a.createElement("option",{value:e.id,key:a},e.name," ",e.number))})))),i.a.createElement("td",null,i.a.createElement("div",{style:{display:"flex",flexDirection:"row"}},i.a.createElement(h.a,{onChange:function(e){return de(e.target.value)},style:{width:80},type:"text",value:me}))),i.a.createElement("td",null,i.a.createElement(E.a,{style:{marginLeft:-18,display:"flex",flexDirection:"row",marginRight:-10}},(t=e.rekening_id,i.a.createElement(i.a.Fragment,null,i.a.createElement(g.a,{onClick:function(){Ne(t),ie(null),Ie(!0),de(0)},color:"success",size:"sm"},i.a.createElement(D.b,null)))),i.a.createElement(g.a,{onClick:function(e){return ie(null)},style:{marginLeft:10},color:"primary",size:"sm"},i.a.createElement(N.a,null))))):i.a.createElement("tr",{key:a},i.a.createElement("td",null,e.rekening.bank.name),i.a.createElement("td",null,e.rekening.name),i.a.createElement("td",null,i.a.createElement(E.a,{style:{display:"flex",flexDirection:"row"}},e.merchant_rate)),i.a.createElement("td",null,i.a.createElement(E.a,{style:{marginLeft:-18,display:"flex",flexDirection:"row",marginRight:-10}},i.a.createElement(g.a,{onClick:function(e){re(!ne),ie(a),Ie(!1)},color:"success",size:"sm"},i.a.createElement(D.a,null)),i.a.createElement(g.a,{onClick:Fe,style:{marginLeft:5},color:"danger",size:"sm"},i.a.createElement(D.d,null)),i.a.createElement(L,{id:De,item:e.rekening_id,toggle:Fe,modal:we})))));var t};return i.a.createElement("div",null,i.a.createElement(p.a,null,i.a.createElement(I.a,{position:I.b.POSITION.TOP_CENTER}),i.a.createElement(E.a,{xs:"12"},i.a.createElement(b.a,{timeout:300,in:!0},i.a.createElement(f.a,null,i.a.createElement(k.a,{onSubmit:Me,className:"form-horizontal"},i.a.createElement(v.a,null,i.a.createElement("i",{className:"fa fa-edit"}),"Edit Data Merchant"),i.a.createElement(y.a,{isOpen:!0,id:"collapseExample"},i.a.createElement(O.a,null,i.a.createElement(j.a,null,i.a.createElement(C.a,{htmlFor:"appendedInput"},"Username"),i.a.createElement(E.a,{sm:"3",style:{marginLeft:-14}},i.a.createElement(h.a,{onChange:function(e){return z(e.target.value)},value:n,name:"username",id:"appendedInput",type:"text",required:!0}))),i.a.createElement(j.a,null,i.a.createElement(C.a,{htmlFor:"phonenumber"},"Phonenumber"),i.a.createElement(E.a,{sm:"3",style:{marginLeft:-14}},i.a.createElement(h.a,{onChange:function(e){return q(e.target.value)},value:K,name:"phonenumber",id:"phonenumber",size:"16",type:"number",required:!0}))),i.a.createElement(j.a,null,i.a.createElement(C.a,{for:"exampleSelect"},"Status saat ini : ",!0===V?"Active":"Non Active"," "),i.a.createElement(E.a,{sm:"3",style:{marginLeft:-14}},i.a.createElement(h.a,{onChange:function(e){return G(e.target.value)},type:"select",name:"status",id:"exampleSelect"},i.a.createElement("option",{defaultValue:!0,selected:!0,disabled:!0},"Ubah Status"),!1===V&&i.a.createElement("option",{value:"1"},"Active"),V&&i.a.createElement(i.a.Fragment,null,i.a.createElement("option",{value:"1"},"Active"),i.a.createElement("option",{value:"0"},"Non Active"))))),i.a.createElement(f.a,{style:{marginTop:25}},i.a.createElement("p",{style:{paddingLeft:5,marginTop:-10,backgroundColor:"white",marginLeft:20,width:130}},"Merchant Rekening"),i.a.createElement(O.a,{style:{marginTop:-15}},i.a.createElement(g.a,{onClick:_e,color:"primary",style:{marginBottom:10}},"Tambah Rekening"),i.a.createElement(_,{id:De,bank:W,toggle:_e,modal:ke}),i.a.createElement(S.a,{hover:!0,bordered:!0,striped:!0,responsive:!0,size:"sm"},i.a.createElement("thead",null,i.a.createElement("tr",null,i.a.createElement("th",null,"Bank"),i.a.createElement("th",null,"Rekening"),i.a.createElement("th",null,"Merchant Rate"),i.a.createElement("th",null,"Actions"))),i.a.createElement("tbody",null,$.map((function(e,a){return i.a.createElement(i.a.Fragment,null,qe(e,a))})))),i.a.createElement(R.a,{style:{marginBottom:10},color:"warning"},"Tips: Satu bank hanya boleh satu rekening merchant.")))),i.a.createElement(w.a,null,i.a.createElement(g.a,{type:"submit",size:"sm",color:"success",style:{marginRight:"10px"}},i.a.createElement("i",{className:"fa fa-dot-circle-o"}),"Edit"),i.a.createElement(g.a,{onClick:Be,type:"reset",size:"sm",color:"danger"},i.a.createElement("i",{className:"fa fa-ban"})," Delete"),i.a.createElement("div",null,i.a.createElement(u.a,{isOpen:je,toggle:Be},i.a.createElement(s.a,{toggle:Be},"Delete Merchant"),i.a.createElement(m.a,null,"Apakah anda yakin akan menghapus merchant: ",n," dengan id: ",e.match.params.id," ini?"),i.a.createElement(d.a,null,i.a.createElement(g.a,{color:"primary",onClick:Ke},"Delete")," ",i.a.createElement(g.a,{color:"secondary",onClick:Be},"Cancel"))))))))))))}}}]);